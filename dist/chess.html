<!DOCTYPE html><html><head><title>Metamorph-Chess</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin></script><link rel="stylesheet" href="/chess.25ecd270.css"><link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css" integrity="sha384-q94+BZtLrkL1/ohfjR8c6L+A6qzNH9R2hBLwyoAfu3i/WCvQjzL2RQJ3uNHDISdU" crossorigin><script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin></script><script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js" integrity="sha384-8Vi8VHwn3vjQ9eUHUxex3JSN/NFqUg3QbPyX8kWyb93+8AC/pPWTzj+nHtbC5bxD" crossorigin></script><script src="/chess.bef3132b.js"></script></head><body>  <div class="left split"> <div class="centered"> <div id="board1" style="width:650px"></div> </div> </div>  <div class="right split"> <div class="card centered text-center" style="width:65%"> <div class="card-header"> <ul class="card-header-tabs nav nav-tabs"> <li class="nav-item"> <a class="active nav-link" aria-current="true" href="#" id="playTab">Play</a> </li> <li class="nav-item"> <a class="nav-link" href="#" id="howToPlayTab">How to play</a> </li> </ul> </div> <div class="card-body" id="content"> <p class="card-text">I want to play as...</p>  <div class="squares"> <div class="square white-square" id="whiteSquare"></div> <div class="black-square square" id="blackSquare"></div> <div class="half-square square" id="randomSquare"></div> </div> <p class="card-text" style="margin-top:3%">against...</p>  <div> <div class="opponent"> <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" value="myself" checked> <label class="form-check-label" for="flexRadioDefault1"> Myself </label> </div> <div class="opponent"> <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault1" value="computer"> <label class="form-check-label" for="flexRadioDefault1"> Computer </label> </div> </div>  <div class="ctrl-buttons"> <button type="button" class="btn btn-primary" id="startBtn">Start game</button> <button type="button" class="btn btn-primary" id="clearBtn">Clear game</button> </div> </div> </div> </div> <script>let e;function t(e,t){document.getElementById(e).addEventListener("click",function(e){e.preventDefault(),document.querySelectorAll(".nav-link").forEach(function(e){e.classList.remove("active")}),this.classList.add("active"),document.getElementById("content").innerHTML=t})}var o=`
        <h5>How to play</h5>
        <p>Metamorph-Chess puts a new spin on the classic chess game!</p>
        <p>This variation of chess adds an unpredictable twist where the pieces transform into another random piece after it is moved. This leads to much more exciting games to play against your friends or the computer!</p>
      `;function n(t){let o=document.getElementById(t);o.addEventListener("click",function(){document.querySelectorAll(".square").forEach(function(e){e.classList.remove("clicked")}),o.classList.add("clicked"),"whiteSquare"===t?e="white":"blackSquare"===t?e="black":"randomSquare"===t&&(e=.5>Math.random()?"white":"black"),console.log("Player color: "+e),h.orientation=e,r.destroy(),r=Chessboard("board1",h)})}t("playTab",`
        <p class="card-text">I want to play as...</p>
        <\!-- player color selection -->
        <div>
          <p class="card-text">White, black, random</p>
        </div>
        <\!-- buttons -->
        <div class="ctrl-buttons">
          <button type="button" class="btn btn-primary" id="startBtn">Start game</button>
          <button type="button" class="btn btn-primary" id="clearBtn">Clear game</button>
        </div>
      `),t("howToPlayTab",o),n("whiteSquare"),n("blackSquare"),n("randomSquare");let a="myself";document.querySelectorAll('input[name="flexRadioDefault"]').forEach(function(e){e.addEventListener("change",function(){console.log("Opponenet type: "+(a=this.value))})});let r=null,s=new Chess;function i(){$("#board1 .square-55d63").css("background","")}function c(e){let t=$("#board1 .square-"+e),o="#a9a9a9";t.hasClass("black-3c85d")&&(o="#696969"),t.css("background",o)}function l(t,o,n){i();let a=s.turn();if(null===s.move({from:t,to:o,promotion:"q"}))return"snapback";{var c;let t;let i=(s.turn(),(t=["q","r","r","b","b","n","n","p","p","p","p","p","p","p","p"])[Math.floor(Math.random()*t.length)]);s.remove(n),s.put({type:i,color:a},o),r.destroy(),r=Chessboard("board1",{draggable:!0,position:s.fen(),orientation:e,onDrop:l,onMouseoutSquare:d,onMouseoverSquare:u,onSnapEnd:p})}r.position(s.fen()),b()}function u(e,t){let o=s.moves({square:e,verbose:!0});if(0!==o.length){c(e);for(let e=0;e<o.length;e++)c(o[e].to)}}function d(e,t){i()}function p(){r.position(s.fen())}function b(){if("computer"===a&&("white"===e&&"b"===s.turn()||"black"===e&&"w"===s.turn())){let t=s.moves({verbose:!0});if(0===t.length){console.log("Game over");return}let o=Math.floor(Math.random()*t.length),n=t[o];s.move(n),r.position(s.fen()),r.destroy(),(r=Chessboard("board1",{draggable:!0,position:s.fen(),orientation:"w"===e?"white":"black",onDrop:l,onMouseoutSquare:d,onMouseoverSquare:u,onSnapEnd:p})).position(s.fen()),console.log("Bot moves:",n.from,"to",n.to),console.log(s.ascii())}}let h={draggable:!0,onDragStart:function(e,t){if(s.game_over()||"w"===s.turn()&&-1!==t.search(/^b/)||"b"===s.turn()&&-1!==t.search(/^w/))return!1},orientation:e,onDrop:l,onMouseoutSquare:d,onMouseoverSquare:u,onSnapEnd:p};r=Chessboard("board1",h),$("#startBtn").on("click",function(){r.start(),"black"===e&&b()}),$("#clearBtn").on("click",function(){r.clear(),s.reset()});</script> </body></html>