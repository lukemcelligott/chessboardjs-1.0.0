var r=function(r){var e="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",n=["1-0","0-1","1/2-1/2","*"],t={b:[16,32,17,15],w:[-16,-32,-17,-15]},o={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},i=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],u=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],f={p:0,n:1,b:2,r:3,q:4,k:5},a={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},l={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},p={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},c={w:[{square:p.a1,flag:l.QSIDE_CASTLE},{square:p.h1,flag:l.KSIDE_CASTLE}],b:[{square:p.a8,flag:l.QSIDE_CASTLE},{square:p.h8,flag:l.KSIDE_CASTLE}]},s=Array(128),v={w:-1,b:-1},g="w",h={w:0,b:0},d=-1,b=0,E=1,m=[],_={},A={};function y(r){void 0===r&&(r=!1),s=Array(128),v={w:-1,b:-1},g="w",h={w:0,b:0},d=-1,b=0,E=1,m=[],r||(_={}),A={},P(T())}function S(){for(var r=[],e={},n=function(r){(r in A)&&(e[r]=A[r])};m.length>0;)r.push(B());for(n(T());r.length>0;)j(r.pop()),n(T());A=e}function C(r,e){void 0===e&&(e=!1);var n=r.split(/\s+/),t=n[0],o=0;if(!I(r).valid)return!1;y(e);for(var i=0;i<t.length;i++){var u=t.charAt(i);if("/"===u)o+=8;else if(-1!=="0123456789".indexOf(u))o+=parseInt(u,10);else{var f=u<"a"?"w":"b";L({type:u.toLowerCase(),color:f},W(o)),o++}}return g=n[1],n[2].indexOf("K")>-1&&(h.w|=l.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(h.w|=l.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(h.b|=l.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(h.b|=l.QSIDE_CASTLE),d="-"===n[3]?-1:p[n[3]],b=parseInt(n[4],10),E=parseInt(n[5],10),P(T()),!0}function I(r){var e={0:"No errors.",1:"FEN string must contain six space-delimited fields.",2:"6th field (move number) must be a positive integer.",3:"5th field (half move counter) must be a non-negative integer.",4:"4th field (en-passant square) is invalid.",5:"3rd field (castling availability) is invalid.",6:"2nd field (side to move) is invalid.",7:"1st field (piece positions) does not contain 8 '/'-delimited rows.",8:"1st field (piece positions) is invalid [consecutive numbers].",9:"1st field (piece positions) is invalid [invalid piece].",10:"1st field (piece positions) is invalid [row too large].",11:"Illegal en-passant square"},n=r.split(/\s+/);if(6!==n.length)return{valid:!1,error_number:1,error:e[1]};if(isNaN(n[5])||0>=parseInt(n[5],10))return{valid:!1,error_number:2,error:e[2]};if(isNaN(n[4])||0>parseInt(n[4],10))return{valid:!1,error_number:3,error:e[3]};if(!/^(-|[abcdefgh][36])$/.test(n[3]))return{valid:!1,error_number:4,error:e[4]};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(n[2]))return{valid:!1,error_number:5,error:e[5]};if(!/^(w|b)$/.test(n[1]))return{valid:!1,error_number:6,error:e[6]};var t=n[0].split("/");if(8!==t.length)return{valid:!1,error_number:7,error:e[7]};for(var o=0;o<t.length;o++){for(var i=0,u=!1,f=0;f<t[o].length;f++)if(isNaN(t[o][f])){if(!/^[prnbqkPRNBQK]$/.test(t[o][f]))return{valid:!1,error_number:9,error:e[9]};i+=1,u=!1}else{if(u)return{valid:!1,error_number:8,error:e[8]};i+=parseInt(t[o][f],10),u=!0}if(8!==i)return{valid:!1,error_number:10,error:e[10]}}return"3"==n[3][1]&&"w"==n[1]||"6"==n[3][1]&&"b"==n[1]?{valid:!1,error_number:11,error:e[11]}:{valid:!0,error_number:0,error:e[0]}}function T(){for(var r=0,e="",n=p.a8;n<=p.h1;n++){if(null==s[n])r++;else{r>0&&(e+=r,r=0);var t=s[n].color,o=s[n].type;e+="w"===t?o.toUpperCase():o.toLowerCase()}n+1&136&&(r>0&&(e+=r),n!==p.h1&&(e+="/"),r=0,n+=8)}var i="";h.w&l.KSIDE_CASTLE&&(i+="K"),h.w&l.QSIDE_CASTLE&&(i+="Q"),h.b&l.KSIDE_CASTLE&&(i+="k"),h.b&l.QSIDE_CASTLE&&(i+="q"),i=i||"-";var u=-1===d?"-":W(d);return[e,g,i,u,b,E].join(" ")}function w(r){for(var e=0;e<r.length;e+=2)"string"==typeof r[e]&&"string"==typeof r[e+1]&&(_[r[e]]=r[e+1]);return _}function P(r){m.length>0||(r!==e?(_.SetUp="1",_.FEN=r):(delete _.SetUp,delete _.FEN))}function R(r){var e=s[p[r]];return e?{type:e.type,color:e.color}:null}function L(r,e){if(!("type"in r&&"color"in r)||-1==="pnbrqkPNBRQK".indexOf(r.type.toLowerCase())||!(e in p))return!1;var n=p[e];return("k"!=r.type||-1==v[r.color]||v[r.color]==n)&&(s[n]={type:r.type,color:r.color},"k"===r.type&&(v[r.color]=n),P(T()),!0)}function k(r,e,n,t,o){var i={color:g,from:e,to:n,flags:t,piece:r[e].type};return o&&(i.flags|=l.PROMOTION,i.promotion=o),r[n]?i.captured=r[n].type:t&l.EP_CAPTURE&&(i.captured="p"),i}function O(r){function e(r,e,n,t,o){if("p"===r[n].type&&(0==t>>4||7==t>>4))for(var i=["q","r","b","n"],u=0,f=i.length;u<f;u++)e.push(k(r,n,t,o,i[u]));else e.push(k(r,n,t,o))}var n=[],i=g,u=G(i),f={b:1,w:6},a=p.a8,c=p.h1,b=!1,E=void 0===r||!("legal"in r)||r.legal;if(void 0!==r&&"square"in r){if(!(r.square in p))return[];a=c=p[r.square],b=!0}for(var m=a;m<=c;m++){if(136&m){m+=7;continue}var _=s[m];if(null!=_&&_.color===i){if("p"===_.type){var A=m+t[i][0];if(null==s[A]){e(s,n,m,A,l.NORMAL);var A=m+t[i][1];f[i]===m>>4&&null==s[A]&&e(s,n,m,A,l.BIG_PAWN)}for(y=2;y<4;y++){var A=m+t[i][y];136&A||(null!=s[A]&&s[A].color===u?e(s,n,m,A,l.CAPTURE):A===d&&e(s,n,m,d,l.EP_CAPTURE))}}else for(var y=0,S=o[_.type].length;y<S;y++)for(var C=o[_.type][y],A=m;!(136&(A+=C));){if(null==s[A])e(s,n,m,A,l.NORMAL);else{if(s[A].color===i)break;e(s,n,m,A,l.CAPTURE);break}if("n"===_.type||"k"===_.type)break}}}if(!b||c===v[i]){if(h[i]&l.KSIDE_CASTLE){var I=v[i],T=I+2;null!=s[I+1]||null!=s[T]||D(u,v[i])||D(u,I+1)||D(u,T)||e(s,n,v[i],T,l.KSIDE_CASTLE)}if(h[i]&l.QSIDE_CASTLE){var I=v[i],T=I-2;null!=s[I-1]||null!=s[I-2]||null!=s[I-3]||D(u,v[i])||D(u,I-1)||D(u,T)||e(s,n,v[i],T,l.QSIDE_CASTLE)}}if(!E)return n;for(var w=[],m=0,S=n.length;m<S;m++)j(n[m]),K(i)||w.push(n[m]),B();return w}function N(r,e){var n="";if(r.flags&l.KSIDE_CASTLE)n="O-O";else if(r.flags&l.QSIDE_CASTLE)n="O-O-O";else{var t=function(r,e){for(var n=O({legal:!e}),t=r.from,o=r.to,i=r.piece,u=0,f=0,a=0,l=0,p=n.length;l<p;l++){var c=n[l].from,s=n[l].to;i===n[l].piece&&t!==c&&o===s&&(u++,t>>4==c>>4&&f++,(15&t)==(15&c)&&a++)}return u>0?f>0&&a>0?W(t):a>0?W(t).charAt(1):W(t).charAt(0):""}(r,e);"p"!==r.piece&&(n+=r.piece.toUpperCase()+t),r.flags&(l.CAPTURE|l.EP_CAPTURE)&&("p"===r.piece&&(n+=W(r.from)[0]),n+="x"),n+=W(r.to),r.flags&l.PROMOTION&&(n+="="+r.promotion.toUpperCase())}return j(r),K(g)&&(Q()?n+="#":n+="+"),B(),n}function q(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function D(r,e){for(var n=p.a8;n<=p.h1;n++){if(136&n){n+=7;continue}if(null!=s[n]&&s[n].color===r){var t=s[n],o=n-e,a=o+119;if(i[a]&1<<f[t.type]){if("p"===t.type){if(o>0){if("w"===t.color)return!0}else if("b"===t.color)return!0;continue}if("n"===t.type||"k"===t.type)return!0;for(var l=u[a],c=n+l,v=!1;c!==e;){if(null!=s[c]){v=!0;break}c+=l}if(!v)return!0}}}return!1}function K(r){return D(G(r),v[r])}function Q(){return K(g)&&0===O().length}function U(){return!K(g)&&0===O().length}function x(){for(var r={},e=[],n=0,t=0,o=p.a8;o<=p.h1;o++){if(t=(t+1)%2,136&o){o+=7;continue}var i=s[o];i&&(r[i.type]=i.type in r?r[i.type]+1:1,"b"===i.type&&e.push(t),n++)}if(2===n||3===n&&(1===r.b||1===r.n))return!0;if(n===r.b+2){for(var u=0,f=e.length,o=0;o<f;o++)u+=e[o];if(0===u||u===f)return!0}return!1}function $(){for(var r=[],e={},n=!1;;){var t=B();if(!t)break;r.push(t)}for(;;){var o=T().split(" ").slice(0,4).join(" ");if(e[o]=o in e?e[o]+1:1,e[o]>=3&&(n=!0),!r.length)break;j(r.pop())}return n}function j(r){var e=g,n=G(e);if(m.push({move:r,kings:{b:v.b,w:v.w},turn:g,castling:{b:h.b,w:h.w},ep_square:d,half_moves:b,move_number:E}),s[r.to]=s[r.from],s[r.from]=null,r.flags&l.EP_CAPTURE&&("b"===g?s[r.to-16]=null:s[r.to+16]=null),r.flags&l.PROMOTION&&(s[r.to]={type:r.promotion,color:e}),"k"===s[r.to].type){if(v[s[r.to].color]=r.to,r.flags&l.KSIDE_CASTLE){var t=r.to-1,o=r.to+1;s[t]=s[o],s[o]=null}else if(r.flags&l.QSIDE_CASTLE){var t=r.to+1,o=r.to-2;s[t]=s[o],s[o]=null}h[e]=""}if(h[e]){for(var i=0,u=c[e].length;i<u;i++)if(r.from===c[e][i].square&&h[e]&c[e][i].flag){h[e]^=c[e][i].flag;break}}if(h[n]){for(var i=0,u=c[n].length;i<u;i++)if(r.to===c[n][i].square&&h[n]&c[n][i].flag){h[n]^=c[n][i].flag;break}}d=r.flags&l.BIG_PAWN?"b"===g?r.to-16:r.to+16:-1,"p"===r.piece?b=0:r.flags&(l.CAPTURE|l.EP_CAPTURE)?b=0:b++,"b"===g&&E++,g=G(g)}function B(){var r,e,n=m.pop();if(null==n)return null;var t=n.move;v=n.kings,g=n.turn,h=n.castling,d=n.ep_square,b=n.half_moves,E=n.move_number;var o=g,i=G(g);return s[t.from]=s[t.to],s[t.from].type=t.piece,s[t.to]=null,t.flags&l.CAPTURE?s[t.to]={type:t.captured,color:i}:t.flags&l.EP_CAPTURE&&(s["b"===o?t.to-16:t.to+16]={type:"p",color:i}),t.flags&(l.KSIDE_CASTLE|l.QSIDE_CASTLE)&&(t.flags&l.KSIDE_CASTLE?(r=t.to+1,e=t.to-1):t.flags&l.QSIDE_CASTLE&&(r=t.to-2,e=t.to+1),s[r]=s[e],s[e]=null),t}function M(r,e){var n=q(r);if(e){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],i=t[2],u=t[3],f=t[4]}for(var a=O(),l=0,c=a.length;l<c;l++)if(n===q(N(a[l]))||e&&n===q(N(a[l],!0))||t&&(!o||o.toLowerCase()==a[l].piece)&&p[i]==a[l].from&&p[u]==a[l].to&&(!f||f.toLowerCase()==a[l].promotion))return a[l];return null}function W(r){var e=15&r,n=r>>4;return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function G(r){return"w"===r?"b":"w"}function F(r){var e=function r(e){var n=e instanceof Array?[]:{};for(var t in e)"object"==typeof t?n[t]=r(e[t]):n[t]=e[t];return n}(r);e.san=N(e,!1),e.to=W(e.to),e.from=W(e.from);var n="";for(var t in l)l[t]&e.flags&&(n+=a[t]);return e.flags=n,e}function H(r){return r.replace(/^\s+|\s+$/g,"")}return void 0===r?C(e):C(r),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var r=[],e=p.a8;e<=p.h1;e++){if(136&e){e+=7;continue}r.push(W(e))}return r}(),FLAGS:a,load:function(r){return C(r)},reset:function(){C(e)},moves:function(r){for(var e=O(r),n=[],t=0,o=e.length;t<o;t++)void 0!==r&&"verbose"in r&&r.verbose?n.push(F(e[t])):n.push(N(e[t],!1));return n},ugly_moves:function(r){return O(r)},in_check:function(){return K(g)},in_checkmate:function(){return Q()},in_stalemate:function(){return U()},in_draw:function(){return b>=100||U()||x()||$()},insufficient_material:function(){return x()},in_threefold_repetition:function(){return $()},game_over:function(){return b>=100||Q()||U()||x()||$()},validate_fen:function(r){return I(r)},fen:function(){return T()},board:function(){for(var r=[],e=[],n=p.a8;n<=p.h1;n++)null==s[n]?e.push(null):e.push({type:s[n].type,color:s[n].color}),n+1&136&&(r.push(e),e=[],n+=8);return r},pgn:function(r){var e="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\n",n="object"==typeof r&&"number"==typeof r.max_width?r.max_width:0,t=[],o=!1;for(var i in _)t.push("["+i+' "'+_[i]+'"]'+e),o=!0;o&&m.length&&t.push(e);for(var u=function(r){var e=A[T()];if(void 0!==e){var n=r.length>0?" ":"";r=`${r}${n}{${e}}`}return r},f=[];m.length>0;)f.push(B());var a=[],l="";for(0===f.length&&a.push(u(""));f.length>0;){l=u(l);var p=f.pop();m.length||"b"!==p.color?"w"===p.color&&(l.length&&a.push(l),l=E+"."):l=E+". ...",l=l+" "+N(p,!1),j(p)}if(l.length&&a.push(u(l)),void 0!==_.Result&&a.push(_.Result),0===n)return t.join("")+a.join(" ");for(var c=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},s=0,i=0;i<a.length;i++){if(s+a[i].length>n&&a[i].includes("{")){s=function(r,o){for(var i of o.split(" "))if(i){if(r+i.length>n){for(;c();)r--;t.push(e),r=0}t.push(i),r+=i.length,t.push(" "),r++}return c()&&r--,r}(s,a[i]);continue}s+a[i].length>n&&0!==i?(" "===t[t.length-1]&&t.pop(),t.push(e),s=0):0!==i&&(t.push(" "),s++),t.push(a[i]),s+=a[i].length}return t.join("")},load_pgn:function(r,t){var o=void 0!==t&&"sloppy"in t&&t.sloppy;function i(r){return r.replace(/\\/g,"\\")}var u="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",f=RegExp("^(\\[((?:"+i(u)+")|.)*\\])(?:"+i(u)+"){2}"),a=f.test(r)?f.exec(r)[1]:"";C(e);var l=function(r,e){for(var n="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\r?\n",t={},o=r.split(new RegExp(i(n))),u="",f="",a=0;a<o.length;a++)u=o[a].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),f=o[a].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),H(u).length>0&&(t[u]=f);return t}(a,t);for(var p in l)w([p,l[p]]);if("1"===l.SetUp&&!("FEN"in l&&C(l.FEN,!0)))return!1;for(var c=function(r){return r=r.replace(RegExp(i(u),"g")," "),`{${Array.from(r.slice(1,r.length-1)).map(function(r){return 128>r.charCodeAt(0)?r.charCodeAt(0).toString(16):encodeURIComponent(r).replace(/\%/g,"").toLowerCase()}).join("")}}`},s=function(r){if(r.startsWith("{")&&r.endsWith("}")){var e;return 0==(e=r.slice(1,r.length-1)).length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}},v=r.replace(a,"").replace(RegExp(`({[^}]*})+?|;([^${i(u)}]*)`,"g"),function(r,e,n){return void 0!==e?c(e):" "+c(`{${n.slice(1)}}`)}).replace(RegExp(i(u),"g")," "),g=/(\([^\(\)]+\))+?/g;g.test(v);)v=v.replace(g,"");var h=H(v=(v=(v=v.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));h=h.join(",").replace(/,,+/g,",").split(",");for(var d="",b=0;b<h.length-1;b++){var E=s(h[b]);if(void 0!==E){A[T()]=E;continue}if(null==(d=M(h[b],o)))return!1;j(d)}if(void 0!==(E=s(h[h.length-1]))&&(A[T()]=E,h.pop()),d=h[h.length-1],n.indexOf(d)>-1)(function(r){for(var e in r)return!0;return!1})(_)&&void 0===_.Result&&w(["Result",d]);else{if(null==(d=M(d,o)))return!1;j(d)}return!0},header:function(){return w(arguments)},ascii:function(){return function(){for(var r="   +------------------------+\n",e=p.a8;e<=p.h1;e++){if(0==(15&e)&&(r+=" "+"87654321"[e>>4]+" |"),null==s[e])r+=" . ";else{var n=s[e].type;r+=" "+("w"===s[e].color?n.toUpperCase():n.toLowerCase())+" "}e+1&136&&(r+="|\n",e+=8)}return r+"   +------------------------+\n     a  b  c  d  e  f  g  h\n"}()},turn:function(){return g},move:function(r,e){var n=void 0!==e&&"sloppy"in e&&e.sloppy,t=null;if("string"==typeof r)t=M(r,n);else if("object"==typeof r){for(var o=O(),i=0,u=o.length;i<u;i++)if(r.from===W(o[i].from)&&r.to===W(o[i].to)&&(!("promotion"in o[i])||r.promotion===o[i].promotion)){t=o[i];break}}if(!t)return null;var f=F(t);return j(t),f},ugly_move:function(r,e){var n=F(r);return j(r),n},undo:function(){var r=B();return r?F(r):null},clear:function(){return y()},put:function(r,e){return L(r,e)},get:function(r){return R(r)},remove:function(r){var e;return e=R(r),s[p[r]]=null,e&&"k"===e.type&&(v[e.color]=-1),P(T()),e},perft:function(r){return function r(e){for(var n=O({legal:!1}),t=0,o=g,i=0,u=n.length;i<u;i++)j(n[i]),!K(o)&&(e-1>0?t+=r(e-1):t++),B();return t}(r)},square_color:function(r){if(r in p){var e=p[r];return((e>>4)+(15&e))%2==0?"light":"dark"}return null},history:function(r){for(var e=[],n=[],t=void 0!==r&&("verbose"in r)&&r.verbose;m.length>0;)e.push(B());for(;e.length>0;){var o=e.pop();t?n.push(F(o)):n.push(N(o)),j(o)}return n},get_comment:function(){return A[T()]},set_comment:function(r){A[T()]=r.replace("{","[").replace("}","]")},delete_comment:function(){var r=A[T()];return delete A[T()],r},get_comments:function(){return S(),Object.keys(A).map(function(r){return{fen:r,comment:A[r]}})},delete_comments:function(){return S(),Object.keys(A).map(function(r){var e=A[r];return delete A[r],{fen:r,comment:e}})}}};"undefined"!=typeof exports&&(exports.Chess=r),"undefined"!=typeof define&&define(function(){return r});
//# sourceMappingURL=chess.bef3132b.js.map
